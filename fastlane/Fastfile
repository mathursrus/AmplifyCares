default_platform(:ios)

platform :ios do
  desc "Deploy to TestFlight"
  lane :deploy_to_testflight do
    app_store_connect_api_key(
      key_id: ENV['APPLE_API_KEY_ID'],
      issuer_id: ENV['APPLE_ISSUER_ID'],
      key_content: ENV['FASTLANE_API_KEY']
    )
    
    build_app(
      workspace: "cordova/platforms/ios/Self care matters.xcworkspace", # Adjust this path
      scheme: "Self care matters", # And this scheme name as necessary
      export_method: 'app-store'
    )
    
    upload_to_testflight
  end
end
